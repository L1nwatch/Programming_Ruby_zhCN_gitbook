从 1.8 版本开始，Ruby 内建了 RDoc 工具，它可以提取并格式化嵌套在 Ruby 源代码文件中的文档。该工具被用来为 Ruby 內建的类和模块生成文档。不断增长的库和扩展也使用这种方式来写文档。

RDoc 做两件事情。第一，它分析 Ruby 和 C 源文件以寻找需要文档化的信息。第二，它把得到的这些信息转换成某种方便阅读的格式。RDoc 可以生成两种格式的输出：HTML 和 ri。

如果我们的源代码包括注释，RDoc 会使用它们来丰富产生的文档。通常来说，元素前面的注释被用来生成该元素的文档。

RDoc 也可以生成能被 ri 命令行工具识别的文档。新的 Ruby 发行版中內建的类和模块（以及某些库）都是用这种方式来建立文档的。

### 16.1 向 Ruby 代码中添加 RDoc

RDoc 解析 Ruby 源代码以提取器主要元素（类、模块、方法、属性等等）。通过在文件中的元素前添加注释块，你可以为该元素添加额外的文档。

注释块可以很自然地书写，或者在连续的注释行前加 `#`、或者把注释放到 `=begin` ... `=end` 块中。如果使用第二种形式，`=begin` 行必须带 `rdoc` 标签，以和其他风格的文档相区分。

```ruby
=begin rdoc
xxx
=end
def calculate_path
  # xxx
end
```

在文档注释中，段落中的行具有相同的左边距。缩进超过此空白部分的文本被逐字地格式化。

有些文本可以被标记起来。`_word_`、`*word*` 和 `+word+` 将分别以斜体、粗体和印刷体来显示其中的词。如果想处理多个词或者含有非词字符的文本，你可以用 `<em>xxx</em>`、`<b>xxx</b>`、`<tt>xxx</tt>`。把反斜线加入到内嵌的标记前将使它不被解释。

如果 RDoc 发现注释行以 `#--` 开头，那么它将停止处理注释。这可以用来区分外部注释和内部注释，或者禁止将注释关联到方法、类或模块上。以 `#++` 开头的行重新打开文档处理功能。

```ruby
# xxx
#--
# yyy
#++
# zzz
#--
# ...
def get_dob
  # ...
end
```

#### 16.1.1 超链接

以下画线或减号作前缀的类名、源代码文件以及任何方法名都会自动把注释文本转化成指向它们描述的链接。

以 `http:`、`mailto:`、`ftp:` 和 `www:` 开始的网络链接也能被识别。引用外部图像文件的 HTTP URL 将被转换成内嵌的 `<IMG ...>` 标记。以 `link:` 开头的链接被认为是引用本地文件，且其路径是相对于当前操作路径（即存储输出文件的路径）的相对路径。

超链接也可以是 `label[url]` 形式，在这种情况下 label 是被显示的文本，而 url 是被链接的目标。如果 label 中含有多个词，则可以将它们放到花括号中：`{two words}[url]`

#### 16.1.2 列表

列表是缩进的段落，且带有

*   一个 \* 或者 \- （用于无序列表）
*   后跟一个点的数字，用于编号列表
*   后跟一个点的大写或小写字母，用于字母列表

例如：

```ruby
# xxxx
# * yyyy
# * zzzz
# * 1111
# 22222
```

注意一个列表项中后续的行是如何缩进以和第一行对齐的

带标签的列表（labled list，有时也称为描述列表）使用方括号将标记括起

```ruby
# [cat] small dosxx
# [+cat+] sdasdsadsadas
```

带标签的列表也可以通过在标记后加两个冒号来生成。这将得到表格形式的输出，所以描述都会排列整齐。

```ruby
# cat:: xxxx
# +cat+:: yyyy
```

对两种类型的标记列表而言，如果主体文本的开头和标记在同一行，那么开头的位置决定主体文本剩余部分的缩进量。主体文本也可以从标记的下一行开始，并从标记的开头缩进。这常用在标记比较长的情况下

```ruby
# <tt>--output</tt> <i>name [, name]</i>::
#	specify the name xxxx
# 
#  <tt>....
```

#### 16.1.3 标题

以等于号开头的行表示标题。等于号个数越多，则标题的级别越高。

```ruby
# = Level One
# == Level Two
# and so on..
```

3 个或更多的连字符表示水平线

```ruby
# and so it goes...
# ---
# xxxx
```

#### 16.1.4 文档修饰符

