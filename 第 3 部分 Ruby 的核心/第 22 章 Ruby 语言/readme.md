### 22.1 源代码编排

Ruby 程序是用 7 位 ASCII、Kanji（使用 EUC 或者 SJIS）或者 UTF-8 来表示的。如果要使用非 7 位 ASCII 的其他字符集，那么必须适当地设置 KCODE 选项。

Ruby 是基于行的语言，Ruby 的表达式和语句都以行尾结束，除非解析器能够确定语句是不完整的——比如行最后一个符号是操作符或者逗号。分号可以区分一行中的多个表达式。你也可以在行尾加一个反斜线表示延续到下一行。注释以 # 开始，到物理行结束为止。在语法分析时注释将被忽略。

Ruby 会忽略以 `=begin` 开头的和以 `=end` 开头的行之间的物理行，它们可以被用来注释掉一段代码或者用在源代码中嵌入文档。

Ruby 一次性读入整个程序，所以你可以用管道将程序传递给 Ruby 解释器的标准输入流。

```shell
echo 'puts "Hello"' | ruby
```

在源代码的任意位置，如果 Ruby 遇到只含有 `__END__` 且后没有空格的行，那么 Ruby 将认为该行是程序的结束行——后面的行都不会被当做程序代码。不过，使用全局的 IO 对象 DATA，可以将这些行读入到运行的程序中。

#### 22.1.1 BEGIN 和 END Blocks

Ruby 的每个源代码文件都可以声明当自己被装载时要执行的代码 block（BEGIN block）和程序运行结束后要执行的 block（END block）。

```ruby
BEGIN {
  # 开始代码
  }

END {
  # 结束代码
  }
```

一个程序可以包含多个 BEGIN 和 END block。BEGIN block 的执行顺序和它出现的顺序相同。END block 的执行顺序与此相反。

#### 22.1.2 常规分隔输入

